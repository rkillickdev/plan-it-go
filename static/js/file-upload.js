// This was a workaround to remove the default innerHTML on the custom file
// input label, generated by django crispy forms

const customFileLabel = document.querySelector(".custom-file-label");

document.addEventListener("DOMContentLoaded", () => {
    customFileLabel.innerHTML = "Select A File";
});

// Event listener added to submit button on forms with a file input field.
// The function checks if the file size is over 2MB and prevents form
// submission and alerts user if this is the case.
// I referenced several articles for this solution:
// https://www.willmaster.com/library/manage-forms/limiting-file-upload-size.php
// https://stackdiary.com/tutorials/how-to-check-file-upload-size-with-javascript
// https://wesbos.com/javascript/05-events/prevent-default-and-form-events

// I referenced the following articles for triggering bootstrap modals from javascript: 
// https://stackoverflow.com/questions/62827002/bootstrap-v5-manually-call-a-modal-mymodal-show-not-working-vanilla-javascrip
// https://getbootstrap.com/docs/5.2/components/modal/#via-javascript

const fileUploadInput = document.querySelector(".file-upload-input");
const uploadSubmit = document.getElementById("submit-button");
const fileWarningModal = new bootstrap.Modal(document.getElementById("modal-file-warning"), {});

uploadSubmit.addEventListener("click", (e) => {
    const fileSize = fileUploadInput.files[0].size;
    const maxSizeInBytes = 2097152;

    if (fileSize > maxSizeInBytes) {
        e.preventDefault();
        fileWarningModal.show();
    }
});







